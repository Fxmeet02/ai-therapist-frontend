```html
<!-- Improved AI Therapist Companion with Voice Journaling + Multi-Language -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AI Therapist Companion</title>
<style>
  body { font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background: linear-gradient(to bottom right, #f0f4c3, #c8e6c9); transition: background 0.5s ease; }
  .container { background: rgba(255,255,255,0.95); backdrop-filter: blur(6px); padding: 20px; border-radius: 16px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); max-width: 420px; width: 90%; display: flex; flex-direction: column; }
  .messages { flex: 1; max-height: 300px; overflow-y: auto; margin-bottom: 10px; display: flex; flex-direction: column; gap: 6px; }
  .message { padding: 10px 14px; border-radius: 12px; max-width: 80%; word-wrap: break-word; animation: fadeIn 0.3s ease; }
  .user { align-self: flex-end; background: #bbdefb; }
  .bot { align-self: flex-start; background: #c8e6c9; }
  input, select { padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-bottom: 8px; width: calc(100% - 22px); }
  button { padding: 10px; background: #42a5f5; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: background 0.3s; margin-bottom: 8px; }
  button:hover { background: #1e88e5; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body>
<div class="container">
  <h2>AI Therapist Companion ü§ù</h2>
  <select id="languageSelect">
    <option value="en">English</option>
    <option value="es">Spanish</option>
    <option value="hi">Hindi</option>
    <option value="fr">French</option>
    <option value="de">German</option>
    <option value="zh">Chinese</option>
  </select>
  <div id="messages" class="messages"></div>
  <input type="text" id="userInput" placeholder="How are you feeling today?" />
  <button onclick="sendMessage()">Send</button>
  <button onclick="startListening()">üé§ Speak</button>
  <p id="status"></p>
</div>
<script>
const backendURL = "https://ai-therapist-backendfinal.onrender.com/analyze_emotion";
let recognition;
if ('webkitSpeechRecognition' in window) {
    recognition = new webkitSpeechRecognition();
    recognition.lang = 'en-US';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;
    recognition.onresult = function(event) {
        document.getElementById("userInput").value = event.results[0][0].transcript;
    };
    recognition.onerror = function() { document.getElementById("status").textContent = "Voice recognition error."; };
}
function startListening() {
    if (recognition) {
        document.getElementById("status").textContent = "Listening...";
        recognition.start();
    } else {
        alert("Voice recognition not supported on this browser.");
    }
}
function addMessage(content, role) {
    const messages = document.getElementById("messages");
    const div = document.createElement("div");
    div.className = `message ${role}`;
    div.textContent = content;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
}
async function sendMessage() {
    const input = document.getElementById("userInput");
    const text = input.value.trim();
    if (!text) return;
    addMessage(text, "user");
    input.value = "";
    document.getElementById("status").textContent = "AI Therapist is typing...";
    try {
        const selectedLang = document.getElementById("languageSelect").value;
        const response = await fetch(backendURL, {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new URLSearchParams({ text }),
        });
        const data = await response.json();
        const reply = data.emotion || "I am here to listen.";
        addMessage(reply, "bot");
        document.getElementById("status").textContent = "";
    } catch (error) {
        addMessage("Sorry, there was a connection error.", "bot");
        document.getElementById("status").textContent = "";
    }
}
</script>
</body>
</html>
```
